# Destruct
Destruct as in "This message will self-destruct." Use Hashicorp Vault to share "self-destructing" secrets using a one-time password.

## Why
Despite the many fantastic features of Hashicorp Vault, there are still times when secrets (passwords, keys, etc.) need to be generated by one person/entity and shared with another. This often leads to sensitive data being shared via insecure means (email, chat, sticky notes, etc.) and then unnecessarily stored in long-term and insecure storage.

This tool aims to share secrets in such a way that shared-secrets are: stored in a secure system (currently a pre-existing Hashicorp Vault environment), only accessible via a single-use token, and deleted from that system after being accessed once.

## Usage
```
destruct -h
NAME:
   destruct - Store or access Vault secrets that will auto-delete after being accessed.

USAGE:
   destruct [global options] command [command options] [arguments...]

VERSION:
   0.0.0

COMMANDS:
   store, s     Store secrets
   retrieve, r  Retrieve secrets
   help, h      Shows a list of commands or help for one command

GLOBAL OPTIONS:
   --help, -h     show help
   --version, -v  print the version
```

### Store
```
destruct store -h
NAME:
   destruct store - Store secrets

USAGE:
   destruct store [command options] [jsonified secrets]

OPTIONS:
   --vault-addr value, -a value  Vault service hostname/IP and port (default: "https://127.0.0.1:8200")
   --secret value, -s value      Comma-separated name:secret pair
   --insecure, -k                Allow invalid SSL cert on Vault service
```

Example:
```
destruct store --vault-addr "http://127.0.0.1:1234" -s "foo,a" -s "bar,b"

s.dbxba0q2657vy62EykkKaLtV
```

### Retrieve
```
destruct retrieve -h
NAME:
   destruct retrieve - Retrieve secrets

USAGE:
   destruct retrieve [command options] [arguments...]

OPTIONS:
   --vault-addr value, -a value  Vault service hostname/IP and port (default: "https://127.0.0.1:8200")
   --insecure, -k                Allow invalid SSL cert on Vault service
   --token token, -t token       Single-use Vault token
```

Example:
```
retrieve --vault-addr "http://127.0.0.1:1234" -t s.dbxba0q2657vy62EykkKaLtV

map[bar:b foo:a]
```
