# Destruct
Destruct as in "This message will self-destruct." Use Hashicorp Vault to share "self-destructing" secrets using a one-time password.

## Why
Despite the fantastic features of Hashicorp Vault, there are still times when secrets (passwords, keys, etc.) need to be generated by one person/entity and shared with another. This often leads to sensitive data being shared via insecure means (email, chat, sticky notes, etc.) and then unnecessarily stored in long-term and insecure storage.

This tool aims to share secrets in such a way that shared-secrets are: stored in a secure system (currently a pre-existing Hashicorp Vault environment), only accessible via a single-use token, and deleted from that system after being accessed once.

## Usage
```
NAME:
   destruct - Store or access Vault secrets that will auto-delete after being accessed.

USAGE:
   destruct [global options] command [command options] [arguments...]

VERSION:
   0.0.0

COMMANDS:
   store, s     Store secrets
   retrieve, r  Retrieve secrets
   help, h      Shows a list of commands or help for one command

GLOBAL OPTIONS:
   --help, -h     show help
   --version, -v  print the version
```

### Store
```
NAME:
   destruct store - Store secrets

USAGE:
   destruct store [command options] secrets

OPTIONS:
   --vault-addr value, -a value  Vault service hostname/IP and port (default: "https://127.0.0.1:8200") [$VAULT_ADDR]
   --token value, -t value       Vault token with access to create self-destructing token [$VAULT_TOKEN] [token help file]
   --insecure, -k                Allow invalid SSL cert on Vault service
```

Example:
```
destruct store --vault-addr "http://127.0.0.1:1234" "some secrets"
s.GH6YnEqETnF0CcBXeQ5IUfqF
```

### Retrieve
```
NAME:
   destruct retrieve - Retrieve secrets

USAGE:
   destruct retrieve [command options] token

OPTIONS:
   --vault-addr value, -a value  Vault service hostname/IP and port (default: "https://127.0.0.1:8200") [$VAULT_ADDR]
   --insecure, -k                Allow invalid SSL cert on Vault service
```

Example:
```
destruct retrieve s.GH6YnEqETnF0CcBXeQ5IUfqF
map[destruct:some secrets]
```
